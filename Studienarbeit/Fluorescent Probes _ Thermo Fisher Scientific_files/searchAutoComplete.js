var wwwUrl="";if(document.location.toString().indexOf("https://")!=-1){wwwUrl="https://"+environmentURL.WCMSERVER}else{wwwUrl="http://"+environmentURL.WCMSERVER}$(function(){if(!!window.$typeahead){return}window.$typeahead=(function(X,an,t){var x="data-omni-action";var J=200;var k=13;var H=40;var ah=38;var G=39;var ae=37;var l=8;var c=127;var z=X("#"+an);z.append('<div id="header-typeahead"><input type="hidden" id="typeahead-autocomplete" name="autocomplete" /><div><ul class="flyout-recent-searches"></ul></div><div class="flyout-typeahead"><div class="typeahead-terms"><ul class="typeahead-term-list"></ul></div></div></div>');var L={keyword:X("#suggest1"),typeahead_container:X("#header-typeahead"),term_list:X("div.typeahead-terms",z),search_terms:X("ul.typeahead-term-list",z),flyout:X(".flyout-typeahead",z),recent_searches:X(".flyout-recent-searches",z),hidden_autocomplete:X("#typeahead-autocomplete"),submit_button:X("#searchButton",z),form:z};L.keyword.wrap('<div id="header-typeahead-input-container"></div>');L.keywordContainer=L.keyword.parent();L.suggested=X('<input id="header-typeahead-suggested" disabled autocomplete="off" />');L.keywordContainer.append(L.suggested);L.form.submit(function(i){var e=Q.prepareSubmit(L.form,L.keyword,i);return !e&&!!X.trim(L.keyword.val())});L.keyword.attr("autocomplete","off");var ac=70;var af={};var K={};var P;var p=function(){L.form.submit()};var ai;var ag=true;var Y=(function(e){function i(ax){L.keyword.val(O.attr("term"));if(ax){L.hidden_autocomplete.val("true")}else{L.hidden_autocomplete.remove()}L.form.submit()}return{setKeywordEntryMode:function(){P=b;p=function(){L.form.submit()}},setListNavigatorMode:function(){p=function(){i(true)}},setRecentSearchesMode:function(){s();P=w;p=function(){i(false)}}}})();var am=false;L.form.keyup(function(e){if(!am){return}P(e)});var m=null;function s(){if(!!m){m.removeClass("active")}m=null}function w(e){if(e.keyCode===H||e.keyCode===ah){if(e.keyCode===H){if(!m||!(nextItem=m.closest("li").next().find("a")[0])){o(L.recent_searches.find("a:first")[0],0)}else{o(nextItem,0)}}else{if(!m||!(nextItem=m.closest("li").prev().find("a")[0])){o(L.recent_searches.find("a:last")[0],0)}else{o(nextItem,0)}}}else{if(e.keyCode===13){p();return}}}function b(i){if(i.keyCode===H||i.keyCode===ah){if(!m){o(L.search_terms.find("a:first")[0],0);Y.setListNavigatorMode()}else{var e=null;if(i.keyCode===H){if(e=m.closest("li").nextAll().not(".typeahead-ignore").first().find("a")[0]){o(e,0);Y.setListNavigatorMode()}else{o(L.search_terms.find("a:first")[0],0)}}else{if(i.keyCode===ah){if(e=m.closest("li").prevAll("li").not(".typeahead-ignore").first().find("a")[0]){o(e,0)}else{o(L.search_terms.find("a:last")[0],0)}}}}}else{if(i.keyCode==l||i.keyCode==c){ag=false;if(ar()){E();i.preventDefault()}}}}var f=false;function y(i,e){if(!f){f=true;if(m){if(i){al(i)}else{al(m)}}else{av(I||L.keyword.val(),e)}}}function Z(e){var i=false;if(ar()&&!e){i=true;M()}else{if(ar()&&e){E()}}y(null,i);setTimeout(function(){if(m&&m.attr("href")){var ax=m.attr("href");window.location=ax}else{if(m){Y.setListNavigatorMode();p()}else{p()}}},J)}L.submit_button.click(function(e){if(!!X.trim(L.keyword.val())){Z()}e.preventDefault();return false});var r=false;L.keyword.keyup(function(e){if(e.keyCode===ah||e.keyCode===H){return true}if(e.keyCode==k){return true}if((e.keyCode==l||e.keyCode==c)&&ar()){return true}Y.setKeywordEntryMode();C(this.value)}).keydown(function(e){switch(e.keyCode){case G:if(ar()){M();r=true;L.keyword.addClass("suggested");return false}break;case k:if(!!X.trim(L.keyword.val())){Z(true)}e.preventDefault();return false;case l:case c:if(r){r=false;L.keyword.removeClass("suggested")}if(ar()){return false}break}ag=true;aq();E();return}).bind({paste:function(){var e=this;setTimeout(function(){C(e.value);aq()},20)},cut:function(){var e=this;setTimeout(function(){C(e.value)},20)}});L.typeahead_container.bind("mouseout, mouseleave",function(e){!!O&&O.removeClass("active");O=null;m=null});var I;function g(){return I}function C(e,i){Y.setKeywordEntryMode();e=X.trim(e);if(!e){I="";W();return false}if(I!==e){I=e;if(!!i){L.keyword.val(I)}j(I)}return true}function S(e,i){C(e,true)}function W(){L.typeahead_container.hide();am=false}function au(){L.recent_searches.hide();L.flyout.show();L.term_list.css("width","100%");L.typeahead_container.show();am=true}function d(){L.typeahead_container.hide();L.recent_searches.hide();am=false}function ad(){m=null;if(L.recent_searches.children().length>0){L.flyout.hide();L.typeahead_container.show();L.recent_searches.show();am=true}}function R(){return L.form.hasClass("active")}function h(){Q.recentSearch(function(az){var aA=az.response.docs;if(aA.length>1){var e=['<li class="recent-searches">'+aA[0].suggestion1+"</li>"];for(var ay=1;ay<aA.length;ay++){var ax="term "+((ay%2)?"odd":"even")+"";e.push('<li class="'+ax+'"><a href="#" term="'+aA[ay].suggestion1+'">',aA[ay].suggestion1,"</a></li>")}L.recent_searches.html(e.join(""));L.recent_searches.find(".term").click(function(){var i=X("a",this).attr("term");av(i,false);p();return false})}})}function j(i){var ax=Q.id+"_"+i;var e=K[ax];ai=ax;if(!e){Q.query(i,function(ay){ab(ay,ax)})}else{ab(e)}}function ab(e,i){if(i){K[i]=e}if(!i||i==ai){if(R()){au()}if(e&&e.response&&aw(e.response.docs)){}else{W()}}else{}}function q(){return L.suggested.val()}function aj(e){L.suggested.val(""+e);L.suggested.addClass("active")}function E(){L.suggested.val("");L.suggested.removeClass("active")}function ar(){return L.suggested.hasClass("active")}function M(){var e=q();L.keyword.val(e);C(e);E()}function aw(aB){var aA=g();var ax=[];var aE,e;var aC;s();var aD="in";if(window.localizedStrings&&window.localizedStrings.inText){aD=window.localizedStrings.inText}if(aB.length>0){var az="Search suggestions";if(window.localizedStrings&&window.localizedStrings.searchSuggestions){az=window.localizedStrings.searchSuggestions}ax.push('<li class="typeahead-ignore">');ax.push('<div class="search-suggestions">'+az+"</div>");for(var ay=0;ay<aB.length;ay++){aE=aB[ay];e=aE.suggestion1;if(aE.type=="AutoComplete"){if(e!==g()&&ag){aj(e)}}else{if(!af[e]){af[e]={}}if(aB[ay].horizontalRegister){ax.push('<li class="typeahead-ignore"><span class="typeahead-hr"></span></li>')}ax.push("<li>");if(aB[ay].url){ax.push('<a class="typeahead-term" href="'+aB[ay].url+'" '+x+'="CATEGORY|'+aB[ay].title+"|"+e+'">'+A(aA,e)+" "+aD+' <span class="title-text">'+aB[ay].title+"</span></a>")}else{if(aB[ay].title){ax.push("<a "+x+'="SKU|'+e+'" term="'+e+'" class="typeahead-term">'+A(aA,e)+" &minus; "+aB[ay].title+"</a>")}else{ax.push("<a "+x+'="STANDARD|'+e+'" term="'+e+'" class="typeahead-term">'+A(aA,e)+"</a>")}}ax.push("</li>")}}}if(ax.length>0){$("#header-typeahead").show();L.search_terms.html(ax.join(""))}else{$("#header-typeahead").hide()}return ax.length}X(".typeahead-term").live("click",function(){var e=false;if(ar()){e=true;M()}y(X(this),e);var i=this;setTimeout(function(){var ax=X(i).attr("href");if(!!ax){window.location=ax}else{Y.setListNavigatorMode();p()}},J)});var O=null;function A(e,i){var ay=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");var ax="<strong>"+e+"</strong>";return i.replace(ay,ax)}var B={};function o(ay,az){if(!am){return}E();var e=ay||this;var ax=az||0;m=X(e);var i=(function(aA,aB){return function(){if(aA!==m){return}!!O&&O.removeClass("active");O=aA.addClass("active")}})(m,m.attr("term"));if(ax){B[m.attr("term")]=setTimeout(i,ax)}else{i()}}function V(ay,ax){var e=ax||this;var az;X(e).css("text-decoration","none");var i=e.getAttribute("term");if(az=B[i]){clearTimeout(az);delete B[i]}}var at;var U=100;function aq(){clearTimeout(at);L.form.addClass("active")}function N(){var e=!ap.providerSelector||ap.providerSelector.isNotMouseOver();if(e){at=setTimeout(function(){W();L.form.removeClass("active")},U)}}X("a.typeahead-term").live("mouseenter",function(e){o(this,ac)}).live("mouseleave",V);L.recent_searches.find("a").live("mouseenter",function(e){o(this,0)}).live("mouseleave",V);X("body").click(function(e){if(!X(e.srcElement).is("#searchButton")){$search=X(e.srcElement).closest("#header-typeahead");if(!$search.length){N();am=false}}});L.keyword.click(function(e){e.stopPropagation();if(am){return}if(this.value.length===0){Y.setRecentSearchesMode();ad();aq()}else{Y.setKeywordEntryMode();var i=g();if(i){au();j(i)}aq()}});function av(e,i){if(e){e=e.toLowerCase();var ax={};if(i){ax.searchDetail="AUTOCOMPLETE|true|"+e}else{ax.searchDetail="AUTOCOMPLETE|false|"+e}ax.searchTerm=e;ax.events="SearchOccurred";ax.searchFocusArea="FOCUSAREA|"+Q.name;_lt.tracking.trackPageEvent(ax)}}function al(aA){var ax=aA,i=ax.attr("href"),e=ax.attr(x);if(e){var ay=e.split("|").pop().toLowerCase();if(!i||(i.indexOf("&navID")===-1&&i.indexOf("&customgroup")===-1&&i.indexOf("&category")===-1)){var az={searchDetail:"TYPEAHEAD|"+e,events:"SearchOccurred",type:"e",searchTerm:ay,obj:ax};az.searchFocusArea="FOCUSAREA|"+Q.name;_lt.tracking.trackPageEvent(az)}}}var ap={getDictionary:function(){return af},getSearchHistory:function(){return K},getHighlightedTerm:function(){return O},setKeyword:S,addProvider:function(e){if(a&&e&&e.id){a[e.id]=e;if(ap.providerSelector){if(!ap.providerSelector.selectorExists()){ap.providerSelector.createSelector(function(i){ap.setProvider(i,true)})}ap.providerSelector.addToSelector(e)}}},setProvider:function(e,i){if(a&&e){var ay=a[e];if(!!ay){Q=ay;if(ap.providerSelector){ap.providerSelector.setActive(e);if(i){ag=false;if(ar()){E()}W();m=null;Y.setKeywordEntryMode();var ax=L.keyword.val();C(ax)}}h()}}},removeProvider:function(e){if(!a||!e){return}var ax=Object.keys;if(!ax){ax=function(aA){var az=[];for(var ay in aA){if(aA.hasOwnProperty(ay)){az.push(ay)}}return az}}var i=ax(a);delete a[e];ap.providerSelector.removeFromSelector(e);i=ax(a);if(Q.id==e){ap.setProvider(i[0])}}};var a={};var Q;ap.providerSelector=searchAutoComplete.providerSelector(an);var D=searchAutoComplete.providers.allSources();ap.addProvider(D);var u=D.id;var T;var ak;var ao=window.location.href.indexOf("navId=");if(ao!=-1){T=window.location.href.substring(ao).split("&")[0]+"&"}ao=window.location.href.indexOf("l1=");if(ao!=-1){ak=window.location.href.substring(ao).split("&")[0]+"&"}if(!!window.globalProviderConfig&&!!window.globalProviderConfig.items&&window.globalProviderConfig.items.length>0){for(var F=0;F<window.globalProviderConfig.items.length;F++){var n=window.globalProviderConfig.items[F];if(n.id==D.id){ap.setProvider(u);ap.removeProvider(D.id)}var aa=(new baseProvider(X,n.id||("provider_"+F),n.title,n.searchURL,n.typeAheadURL,n.group))();ap.addProvider(aa);var v=n.searchURL+"&";if((!!T&&v.indexOf(T)!=-1)||(!!ak&&v.indexOf(ak)!=-1)){u=aa.id}}}ap.setProvider(u);return ap})($,"smartsearch")});var searchAutoComplete=searchAutoComplete||{};searchAutoComplete.providers=searchAutoComplete.providers||{};searchAutoComplete.providerSelector=function(a){var d="searchAutoCompleteProviderSelector";if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){d="searchAutoCompleteProviderSelectorIE78"}var h;function j(l){return l.find("."+d)}var b=false;function c(m,l){var n=a("<select class='"+d+"'></select>");n.hide();m.prepend(n);n.mouseover(function(){b=true});n.mouseleave(function(){b=false});n.change(function(o){l&&l(o.target.value);a("input[role='search']",m).trigger("focus")});return n}function f(m,l){return m.find("option[value='"+l.id+"']").length>0}function k(n,l){var m=n.find("option[value='"+l+"']");m.remove();e(n)}function i(o,n){var m=a("<option value='"+n.id+"'>"+n.name+"</option>");if(!n.group){o.append(m)}else{var l=g(o,n.group);l.append(m)}e(o)}function g(n,m){var l=n.find("optgroup[label='"+m+"']");if(l.length==0){l=a("<optgroup label='"+m+"'></optgroup>");n.append(l)}return l}function e(l){if(l.find("option").length>1){if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){a("input[role='search']").addClass("msie78Search")}a("#smartsearch").addClass("providers-enabled");l.show()}else{if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){a("input[role='search']").removeClass("msie78Search")}a("#smartsearch").removeClass("providers-enabled");l.hide()}}return function(l){h=a(document.getElementById(l));return{isNotMouseOver:function(){return !b},selectorExists:function(){var m=j(h);return m.length>0},createSelector:function(n,o,m){c(h,n,o,m)},addToSelector:function(n){if(!n){return}var m=j(h);if(m.length>0){if(!f(m,n)){i(m,n)}}},removeFromSelector:function(m){var n=j(h);k(n,m)},setActive:function(m){var n=j(h);n.val(m)}}}}($);baseProvider=function(a,d,h,g,b,i){function e(n){var t={response:{numFound:n.length,docs:[]}};if(!!n.result&&(typeof n.result=="string")){var r;try{var r=JSON.parse(n.result)}catch(q){}if(!!r&&!!r.response&&!!r.response.docs&&!!r.response.docs.length){for(var o=0;o<r.response.docs.length;o++){var s=r.response.docs[o];var l=s.value||"";s.term=l;s.suggestion1=l}t.response.numFound=r.response.docs.length;t.response.docs=r.response.docs}}else{if(n){var u={sku:"suggestion1",term:"suggestion1",magellanUrl:"url",searchUrl:"url",title:"title",category:"title",type:"type"};for(var o=0;o<n.length;o++){var k={horizontalRegister:false};var p=n[o];for(var m in p){if(u[m]){k[u[m]]=p[m]}}if(o>0&&n[o-1].type!=k.type){k.horizontalRegister=true}t.response.docs.push(k)}}}return t}function f(j){try{j=decodeURIComponent(escape(j))}catch(k){}return j}function c(r){r=r.replace('"',"").replace('"',"");var j="Recent searches";if(window.localizedStrings&&window.localizedStrings.RECENT_SEARCHES){j=window.localizedStrings.RECENT_SEARCHES}var n={response:{docs:[{suggestion1:j}]}};if(r){var m="";if(window.atob){try{m=window.atob(r);m=f(m)}catch(q){console.log("Unable to decode recent searches cookie")}}else{var p={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(A){var D="";var x,v,y,E,w,C,B;var z=0;A=p._utf8_encode(A);while(z<A.length){x=A.charCodeAt(z++);v=A.charCodeAt(z++);y=A.charCodeAt(z++);E=x>>2;w=(x&3)<<4|v>>4;C=(v&15)<<2|y>>6;B=y&63;if(isNaN(v)){C=B=64}else{if(isNaN(y)){B=64}}D=D+this._keyStr.charAt(E)+this._keyStr.charAt(w)+this._keyStr.charAt(C)+this._keyStr.charAt(B)}return D},decode:function(A){var D="";var x,v,y;var E,w,C,B;var z=0;A=A.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(z<A.length){E=this._keyStr.indexOf(A.charAt(z++));w=this._keyStr.indexOf(A.charAt(z++));C=this._keyStr.indexOf(A.charAt(z++));B=this._keyStr.indexOf(A.charAt(z++));x=E<<2|w>>4;v=(w&15)<<4|C>>2;y=(C&3)<<6|B;D=D+String.fromCharCode(x);if(C!=64){D=D+String.fromCharCode(v)}if(B!=64){D=D+String.fromCharCode(y)}}D=p._utf8_decode(D);return D},_utf8_encode:function(v){v=v.replace(/\r\n/g,"\n");var s="";for(var w=0;w<v.length;w++){var u=v.charCodeAt(w);if(u<128){s+=String.fromCharCode(u)}else{if(u>127&&u<2048){s+=String.fromCharCode(u>>6|192);s+=String.fromCharCode(u&63|128)}else{s+=String.fromCharCode(u>>12|224);s+=String.fromCharCode(u>>6&63|128);s+=String.fromCharCode(u&63|128)}}}return s},_utf8_decode:function(v){var s="";var w=0;var u=c1=c2=0;while(w<v.length){u=v.charCodeAt(w);if(u<128){s+=String.fromCharCode(u);w++}else{if(u>191&&u<224){c2=v.charCodeAt(w+1);s+=String.fromCharCode((u&31)<<6|c2&63);w+=2}else{c2=v.charCodeAt(w+1);c3=v.charCodeAt(w+2);s+=String.fromCharCode((u&15)<<12|(c2&63)<<6|c3&63);w+=3}}}return s}};m=p.decode(r)}var l=m.split("|");for(var o=0;o<l.length;o++){var k=l[o];if(k){k=k.replace(/\+/g," ");n.response.docs.push({suggestion1:k})}}}return n}return function(j){var k={id:d,name:h,group:i,submitPath:g,typeAheadUrl:b};j=a.extend(true,k,j);return{id:j.id,name:j.name,group:j.group,prepareSubmit:function(l,n,m){if(l.prepared){return}l.prepared=true;!!m&&m.preventDefault();setTimeout(function(){if(!!n){j.submitPath=j.submitPath.replace("{keyword}",encodeURIComponent(n.val()))}j.submitPath=j.submitPath.replace("{focusAreaName}",encodeURIComponent(j.name));window.location.href=j.submitPath},300);return true},query:function(m,o){var n=3;if(_lt.displayLangMatch("ja ko zh zt")){n=1}if(m&&m.length>=n){var l=j.typeAheadUrl.replace("{keyword}",encodeURIComponent(m)).replace("{country_code}",_lt.user.displayIso);a.ajax({url:l,data:{language:_lt.user.displayLang},dataType:"jsonp",success:function(p){p=e(p);o&&o(p)}})}else{o&&o({})}},recentSearch:function(n){var l=getCookie("CK_RECENT_SEARCHES");var m=c(l);n&&n(m)}}}};var allSourceProviderId="all-categories";searchAutoComplete.providers.allSources=new baseProvider($,allSourceProviderId,"All Categories",wwwUrl+"/search/results?query={keyword}&resultPage=1&resultsPerPage=15&autocomplete=",wwwUrl+"/search/service/typeaheadSuggestions?query={keyword}&countryCode={country_code}");